{% extends 'base.html' %}

{% block content %}
	<!--Send form-->
	<div class="card text-center justify-content-center col-md-4 offset-md-4 mb-3">
		<div class="card-header text-center bg-dark fs-6 mb-3 ">
			Leave your message here
		</div>
		{% if not current_user.is_authenticated %}
			<div class="card-body ps-3 pe-3 pt-0 pb-0">
				<div class="card card-body mb-3 bg-body-secondary border border-secondary-subtle"
					 style="font-size: .875rem;">
					<p class="mb-0">
						Leaving a message is <a href="{{ url_for('log_in', next=url_for('leave_message')) }}"
												class="link-body"
												style="color: var(--bs-body-color);">log in</a> required.
					</p>
				</div>
			</div>
		{% else %}
			<form method="post">
				<div class="card-body ps-3 pe-3 pt-0 pb-0">
					<textarea class="form-control mb-3" maxlength="{{ config['POST_MAXLENGHT'] }}"
							  placeholder="Start writing your message..." id="exampleFormControlTextarea1"
							  rows="2" name="msg_text">{{ msg_text if msg_text is not none }}</textarea>
				</div>
				<div class="card-footer text-center bg-stripes-body fs-6">
					<button type="submit" class="btn btn-primary btn-sm">Leave</button>
				</div>
			</form>
		{% endif %}
	</div>
	<!--Messages-->
	<div class="card col-md-4 offset-md-4 mb-3">
		<!--Messages header-->
		<div class="card-header text-start bg-dark fs-6">
			Messages
		</div>
		<div id="posts-container" class="card-body pb-0">
		</div>
		<div class="card-footer text-center bg-stripes-body" id="pagination-links">
			<button id="load-more" type="submit" class="btn btn-primary btn-sm">Load more</button>
		</div>
	</div>
	<script type="text/javascript" src="{{ url_for('static', filename='load_leave_message_posts.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='update_post_likes.js') }}"></script>
{% endblock %}